<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Multi-core processing in Python using Per-interpreter GIL</title>
  <link rel="icon" type="image/x-icon"
    href="https://orstedcdn.azureedge.net/-/media/www/images/corp/graphics/icons/favicon.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/reveal.min.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/theme/simple.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
  <link rel="preload" href="https://orstedcdn.azureedge.net/Assets_/dist/fonts/OrstedSans-Regular.woff2" as="font"
    type="font/woff2" crossorigin="">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-light.min.css" />
  <style>
    :root {
      --main-bg-color: white;
      --main-text-color: black;
      --heading-color: #4099da;
      --link-color: #4099da;
    }

    ol {
      font-size: 50%;
    }

    .reveal {
      background-color: var(--main-bg-color);
      color: var(--main-text-color);
      font-family: "Orsted Sans", "Helvetica Neue", Arial, sans-serif !important;
    }

    .reveal h1,
    .reveal h2,
    .reveal h3,
    .reveal h4,
    .reveal h5,
    .reveal h6 {
      color: var(--heading-color);
      font-family: "Orsted Sans", "Helvetica Neue", Arial, sans-serif !important;
    }

    .reveal a {
      color: var(--link-color);
    }

    .reveal .slide-background {
      padding-bottom: 50px;
    }

    .reveal footer.footer {
      position: absolute;
      bottom: var(--r-block-margin);
      left: var(--r-block-margin);
      right: calc(var(--r-block-margin) + 2 * 3.6em);
      height: var(--r-main-font-size);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: space-between;

      font-size: calc(var(--r-main-font-size) * 0.4);
    }

    .reveal footer.footer img {
      height: var(--r-main-font-size);
      width: auto;
      object-fit: contain;
    }

    @media print {
      .reveal .footer {
        position: fixed;
      }
    }

    .timeline-wrapper {
      width: 100%;
      overflow: hidden;
    }

    .timeline-content {
      text-align: center;
      width: 80%;
      float: left;
    }

    .timeline-progress {
      overflow: hidden;
    }

    .timeline-content-title {
      text-align: center;
    }

    .timeline {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      margin: 5px 0;
    }

    .timeline-item {
      position: relative;
      background-color: #f9f9f9;
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 2px 2px;
      margin: 8px 0;
      width: 100px;
      text-align: center;
      z-index: 1;
      font-size: 25px;
      height: 30px;
    }

    .timeline-item::after {
      content: '';
      position: absolute;
      border-style: solid;
      border-width: 8px 8px 0 8px;
      border-color: #000000 transparent transparent transparent;
      top: -18px;
      left: 50%;
      transform: translateX(-50%);
    }

    .timeline-item:first-child::after {
        display: none;
    }

    .timeline-item-marked {
      background-color:#4099da;
    }

    .image-text {
      font-size: 0.7em;
    }
  </style>
</head>

<body>
  <div class="reveal">
    <footer class="footer">
      <a href="https://orsted.com">
        <img src="https://orstedcdn.azureedge.net/-/media/www/images/corp/graphics/icons/favicon.ico" alt="Orsted logo">
      </a>
      <span>Multi-core processing in Python using Per-interpreter GIL, 29.08.2024</span>
    </footer>
    <div class="slides">

      <section>
        <h3>Multi-core processing in Python using Per-interpreter GIL</h3>
        <p>PyCon'24 Gliwice</p>
      </section>

      <section>
        <h4>About √òrsted</h4>
        <p>TODO</p>
      </section>

      <section>
        <h4>About presenters:</h4>
        <div style="column-count: 4;">
          <div style="text-align: left">
            <p>Kamila Smolinska</p>
          </div>
          <img src="https://confreg-media-s3.s3.sbg.io.cloud.ovh.net/media/authors/profile21.png">
          <div style="text-align: left">
            <p>Jan Bielecki</p>
          </div>
          <img src="https://confreg-media-s3.s3.sbg.io.cloud.ovh.net/media/authors/441255849_3731468253792659_2789209670117535857_n.jpg">
      </section>

      <section>
        <h4>Concurrency vs parallelism [1]</h4>
        <img style="height: 10em;" data-src="_assets\_images\concurrent.jpg" />
        <aside class="notes">
          These are your private notes for this slide. You can enable them by clicking `S` key. üìù
          <a href="https://revealjs.com/speaker-view/" target="_blank">More info</a>
        </aside>
      </section>

      <section>
        
        <section>
          <h4>Timeline in CPython parallelism context</h4>
          <div class="timeline-wrapper">
            <div class="timeline-content">
              <img style="height: 9em;" data-src="_assets\_images\cpython_parallelism.webp"/>
              <div class="image-text">
                Visualization of paralleism within a single process using Python version up to 3.11 [2]
              </div>
            </div>
            <div class="timeline-progress">
              <div class="timeline">
                <div class="timeline-item">II 1991</div>
                <div class="timeline-item">I 1998</div>
                <div class="timeline-item">X 2001</div>
                <div class="timeline-item">V 2016</div>
                <div class="timeline-item">IX 2017</div>
                <div class="timeline-item">III 2022</div>
                <div class="timeline-item">I 2023</div>
                <div class="timeline-item">XI 2023</div>
                <div class="timeline-item">X 2024</div>
              </div>
            </div>
          </div>
        </section>
        
        <section>
          <h4>Initial release on Python</h4>
          <div class="timeline-wrapper">
            <div class="timeline-content">
              <img style="height: 8em;" data-src="_assets\_images\guido.webp"/>
              <div class="image-text">
                "Python is a language that has been designed to be easy to read and write"
                ~Guido van Rossum
              </div>
            </div>
            <div class="timeline-progress">
              <div class="timeline">
                <div class="timeline-item timeline-item-marked">II 1991</div>
                <div class="timeline-item">I 1998</div>
                <div class="timeline-item">X 2001</div>
                <div class="timeline-item">V 2016</div>
                <div class="timeline-item">IX 2017</div>
                <div class="timeline-item">III 2022</div>
                <div class="timeline-item">I 2023</div>
                <div class="timeline-item">XI 2023</div>
                <div class="timeline-item">X 2024</div>
              </div>
            </div>
          </div>
        </section>
        
        <section>
          <h4>CPython users can run multiple interpreters in the same process</h4>
          <div class="timeline-wrapper">
            <div class="timeline-content">
              TODO
            </div>
            <div class="timeline-progress">
              <div class="timeline">
                <div class="timeline-item">II 1991</div>
                <div class="timeline-item timeline-item-marked">I 1998</div>
                <div class="timeline-item">X 2001</div>
                <div class="timeline-item">V 2016</div>
                <div class="timeline-item">IX 2017</div>
                <div class="timeline-item">III 2022</div>
                <div class="timeline-item">I 2023</div>
                <div class="timeline-item">XI 2023</div>
                <div class="timeline-item">X 2024</div>
              </div>
            </div>
          </div>
        </section>
        
        <section>
          <h4>The world‚Äôs first multicore processor "Power4"</h4>
          <div class="timeline-wrapper">
            <div class="timeline-content">
              TODO
            </div>
            <div class="timeline-progress">
              <div class="timeline">
                <div class="timeline-item">II 1991</div>
                <div class="timeline-item">I 1998</div>
                <div class="timeline-item timeline-item-marked">X 2001</div>
                <div class="timeline-item">V 2016</div>
                <div class="timeline-item">IX 2017</div>
                <div class="timeline-item">III 2022</div>
                <div class="timeline-item">I 2023</div>
                <div class="timeline-item">XI 2023</div>
                <div class="timeline-item">X 2024</div>
              </div>
            </div>
          </div>
        </section>

        <section>
          <h4>Gilectomy, partially successful attempt to remove the GIL from CPython</h4>
          <div class="timeline-wrapper">
            <div class="timeline-content">
              TODO
            </div>
            <div class="timeline-progress">
              <div class="timeline">
                <div class="timeline-item">II 1991</div>
                <div class="timeline-item">I 1998</div>
                <div class="timeline-item">X 2001</div>
                <div class="timeline-item timeline-item-marked">V 2016</div>
                <div class="timeline-item">IX 2017</div>
                <div class="timeline-item">III 2022</div>
                <div class="timeline-item">I 2023</div>
                <div class="timeline-item">XI 2023</div>
                <div class="timeline-item">X 2024</div>
              </div>
            </div>
          </div>
        </section>

        <section>
          <h4>PEP 554 ‚Äì Multiple Interpreters in the Stdlib</h4>
          <div class="timeline-wrapper">
            <div class="timeline-content">
              TODO
            </div>
            <div class="timeline-progress">
              <div class="timeline">
                <div class="timeline-item">II 1991</div>
                <div class="timeline-item">I 1998</div>
                <div class="timeline-item">X 2001</div>
                <div class="timeline-item">V 2016</div>
                <div class="timeline-item timeline-item-marked">IX 2017</div>
                <div class="timeline-item">III 2022</div>
                <div class="timeline-item">I 2023</div>
                <div class="timeline-item">XI 2023</div>
                <div class="timeline-item">X 2024</div>
              </div>
            </div>
          </div>
        </section>
        
        <section>
          <h4>PEP 684 ‚Äì A Per-Interpreter GIL</h4>
          <div class="timeline-wrapper">
            <div class="timeline-content">
              TODO
            </div>
            <div class="timeline-progress">
              <div class="timeline">
                <div class="timeline-item">II 1991</div>
                <div class="timeline-item">I 1998</div>
                <div class="timeline-item">X 2001</div>
                <div class="timeline-item">V 2016</div>
                <div class="timeline-item">IX 2017</div>
                <div class="timeline-item timeline-item-marked">III 2022</div>
                <div class="timeline-item">I 2023</div>
                <div class="timeline-item">XI 2023</div>
                <div class="timeline-item">X 2024</div>
              </div>
            </div>
          </div>
        </section>

        <section>
          <h4>PEP 703 ‚Äì Making the Global Interpreter Lock Optional in CPython</h4>
          <div class="timeline-wrapper">
            <div class="timeline-content">
              TODO
            </div>
            <div class="timeline-progress">
              <div class="timeline">
                <div class="timeline-item">II 1991</div>
                <div class="timeline-item">I 1998</div>
                <div class="timeline-item">X 2001</div>
                <div class="timeline-item">V 2016</div>
                <div class="timeline-item">IX 2017</div>
                <div class="timeline-item">III 2022</div>
                <div class="timeline-item timeline-item-marked">I 2023</div>
                <div class="timeline-item">XI 2023</div>
                <div class="timeline-item">X 2024</div>
              </div>
            </div>
          </div>
        </section>

        <section>
          <h4>PEP 734 ‚Äì Multiple Interpreters in the Stdlib</h4>
          <div class="timeline-wrapper">
            <div class="timeline-content">
              TODO
            </div>
            <div class="timeline-progress">
              <div class="timeline">
                <div class="timeline-item">II 1991</div>
                <div class="timeline-item">I 1998</div>
                <div class="timeline-item">X 2001</div>
                <div class="timeline-item">V 2016</div>
                <div class="timeline-item">IX 2017</div>
                <div class="timeline-item">III 2022</div>
                <div class="timeline-item">I 2023</div>
                <div class="timeline-item timeline-item-marked">XI 2023</div>
                <div class="timeline-item">X 2024</div>
              </div>
            </div>
          </div>
        </section>

        <section>
          <h4>Python 3.13 release with Per-Interpreter GIL and free-threading</h4>
          <div class="timeline-wrapper">
            <div class="timeline-content">
              TODO
            </div>
            <div class="timeline-progress">
              <div class="timeline">
                <div class="timeline-item">II 1991</div>
                <div class="timeline-item">I 1998</div>
                <div class="timeline-item">X 2001</div>
                <div class="timeline-item">V 2016</div>
                <div class="timeline-item">IX 2017</div>
                <div class="timeline-item">III 2022</div>
                <div class="timeline-item">I 2023</div>
                <div class="timeline-item">XI 2023</div>
                <div class="timeline-item timeline-item-marked">X 2024</div>
              </div>
            </div>
          </div>
        </section>

      </section>
      
      <section>
        <section>
          <h4>GIL enables thread-safe reference counting</h4>
          TODO
        </section>

        <section>
          <h4>Python interpreter [3]</h4>
          <img style="height: 14em;" data-src="_assets\_images\interpreter.jpg" />
        </section>

        <section>
          <h4>Ease of programming vs performance</h4>
          TODO
        </section>

        <section>
          <h4>Reference counting: automation of memory management</h4>
          TODO
        </section>

        <section>
          <h4>GIL free Python implementations (PyPy, IronPython) </h4>
          "The garbage collectors used or implemented by PyPy are not based on reference counting, so the objects are not freed instantly when they are no longer reachable. The most obvious effect of this is that files (and sockets, etc) are not promptly closed when they go out of scope. For files that are opened for writing, data can be left sitting in their output buffers for a while, making the on-disk file appear empty or truncated. Moreover, you might reach your OS‚Äôs limit on the number of concurrently opened files."

        </section>

        <section>
          <h4>GIL enables thread-safe reference counting</h4>
          <img style="height: 13em;" data-src="_assets\_images\life_easier.jpg" />
        </section>
        
      </section>

      <section >
        <h4>Non-parallel concurrency in Python</h4>
        <ul>
          <li>multithreading</li>
          <li>asyncio</li>
        </ul>
      </section>

      <section>
        <h4>Parallelel Python execution</h4>
        <ul>
          <li>multiprocessing</li>
          <li>web server with multiple worker instances</li>
          <li>(new in python 3.13) Per-interpreter GIL*</li>
          <li>(new in python 3.13) Free Threading*</li>
        </ul>
        <br>
        <br>
        * - parallel execution in a single process
      </section>

      <section>
        <section>
          <h6>Multi-threading vs. multi-processing</h6>
          <img style="height: 14em;" data-src="_assets\_images\mtmp.png" />
        </section>

        <section>
          <h6>Multi-processing vs. sub-interpreters</h6>
          <img style="height: 14em;" data-src="_assets\_images\mps.png" />
        </section>

        <section>
          <h6>Multi-threading vs. free-threading</h6>
          <img style="height: 14em;" data-src="_assets\_images\mtft.png" />
        </section>

        <section>
          <h6>Multi-processing vs. free-threading</h6>
          <img style="height: 14em;" data-src="_assets\_images\mpft.png" />
        </section>

        <section>
          <h6>Sub-interpreters vs. free-threading</h6>
          <img style="height: 14em;" data-src="_assets\_images\sft.png" />
        </section>

      </section>

      <section>
        <h4>Preparation of python environments</h4>
        TODO
      </section>

      <section>
        <h4>Quiz</h4>
        TODO
      </section>

      <section>
        <h4>Applications</h4>
        TODO
      </section>

      <section>
        <h4>Bibliography</h4>
        <ol>
          <li>Introduction to Concurrency in Programming Languages, Matthew J. Sottile, Timothy G. Mattson, Craig E Rasmussen</li>
          <li>Parallelism be like, marcus942, https://www.reddit.com/r/ProgrammerHumor/comments/bzv8q4/parallelism_be_like/</li>
          <li>Python Interpreter - Introduction, JavaCafee, https://www.youtube.com/watch?v=VsjJfaUdFO8</li>
        </ol>
      </section>

    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/reveal.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/plugin/highlight/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/plugin/notes/notes.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/plugin/markdown/markdown.min.js"></script>
  <script>
    Reveal.initialize({
      controls: true,
      progress: true,
      center: true,
      hash: true,
      plugins: [RevealHighlight, RevealNotes, RevealMarkdown]
    });

  </script>
</body>

</html>
